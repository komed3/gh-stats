document.addEventListener("DOMContentLoaded",(function(){loadData("repos.json").then((e=>{const a=$(".repos-list").el,s=$(".repos-filter--search").el,l=$('.repos-filter--select[name="type"]').el,i=$('.repos-filter--select[name="lang"]').el,t={},r=()=>{const e=langKey(s.value," "),t=l.value,r=i.value;a.querySelectorAll(".repo").forEach((a=>{a.style.display=!a.getAttribute("search").includes(e)||t&&!a.classList.contains(t)||r&&!a.classList.contains(r)?"none":""}))};e.forEach((e=>{const s=langKey(e.language),[l,i]=e.full_name.split("/"),r=el("div",{className:`box item repo ${s}`});r.setAttribute("search",langKey(`${e.full_name} ${e.description}`," "));let n,c="cube";e.private?(r.classList.add("private"),c="lock",n="Private"):r.classList.add("public"),e.archived&&(r.classList.add("archived"),c="file-archive-o",n="Archived"),e.fork&&(r.classList.add("forked"),c="code-fork",n="Forked"),e.is_template&&(r.classList.add("template"),c="clone",n="Template"),s&&(t[s]=e.language),r.innerHTML=`<div class="repo-info"><div class="repo-header"><i class="fa fa-${c} repo-badge" aria-hidden="true"></i><h3 class="repo-name"><span>${l}</span>/<a href="${e.html_url}" target="_blank">${i}</a></h3>`+(n?`<span class="repo-status">${n}</span>`:"")+"</div>"+`<p class="repo-desc">${e.description}</p>`+`<ul class="repo-topics">${(e.topics??[]).slice(0,7).map((e=>`<li>${e}</li>`)).join("")}</ul><ul class="repo-meta">`+(s?`<li class="repo-lang" style="--c:var(--lang-${s})">${e.language}</li>`:"")+(e.license?.name?`<li class="repo-license"><i class="fa fa-balance-scale" aria-hidden="true"></i><span>${e.license.name}</span></li>`:"")+(e.homepage?`<li class="repo-homepage"><i class="fa fa-link" aria-hidden="true"></i><a href="${e.homepage}" target="_blank">${e.homepage.replace(/^https?:\/\//,"")}</a></li>`:"")+`<li class="repo-size">${fSize(e.size)}</li>`+`<li class="repo-updated">Updated at ${fDate(e.updated_at)}</li></ul></div><div class="repo-stats">`+`<div><b>${fNumber(e.stargazers_count)}</b><span>Stargazers</span></div>`+`<div><b>${fNumber(e.subscribers_count)}</b><span>Subscribers</span></div>`+`<div><b>${fNumber(e.forks_count)}</b><span>Forks</span></div>`+`<div><b>${fNumber(e.open_issues_count)}</b><span>Issues</span></div></div>`,a.appendChild(r)})),i.append(...Object.entries(t).map((([e,a])=>el("option",{value:e,text:a})))),s.addEventListener("keyup",r),l.addEventListener("change",r),i.addEventListener("change",r),$(".repos-filter--clear").el.addEventListener("click",(e=>{e.preventDefault(),s.value="",l.value="",i.value="",r()}))})).catch(console.error)}));